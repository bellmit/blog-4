### mysql索引

[淘宝：Mysql二级索引定义](http://mysql.taobao.org/monthly/2020/01/01/)
[掘金：联合索引数据结构](https://juejin.cn/post/6844904073955639304)
[公众号：mysql索引那些事，好！](https://mp.weixin.qq.com/s?__biz=MzUxNTQyOTIxNA==&mid=2247484041&idx=1&sn=76d3bf1772f9e3c796ad3d8a089220fa&chksm=f9b784b8cec00dae3d52318f6cb2bdee39ad975bf79469b72a499ceca1c5d57db5cbbef914ea&token=2025456560&lang=zh_CN#rd)
[简书：MySQL中char、varchar和text的区别](https://www.jianshu.com/p/cc2d99559532)
二叉树、红黑树做索引的问题：
1. 树的高度过高导致查询效率变慢。二叉太少了，一个节点大小很小，但load次数太多了。
Hash做数据库索引的问题：
1. 不支持范围查找。
B-树做索引的问题：
1. 中间节点的有数据，导致一个节点的size变大，IO费劲，不能用有限的空间分更多的叉

mysql把索引做成b+树的原因：
1. 中间节点不需要放实际数据,只存索引（造成冗余），那么就意味着可以有更多分叉。
   1. 从磁盘中load一个节点，是一次IO操作，IO操作很费时间，且根据计算机组成原理，一次IO交互，一般只能传输4kb的数据（可能有时候有一些局部读取的原理可能会取几十K（4的整数倍），取个16K，24K也是可以的）。但不可能是mb或gb级别的。mysql对这个节点大小设置的是16K
   2. 假设索引字段类型是Bigint，8bit，每两个元素之间存的是下一个节点的地址，mysql分配的是6bit，也就是说一个索引后面配对一个节点地址，成对出现，可以算一下**16K的节点**可以存多少对也就是多少个索引，8b+6b=14b，16K /14b=**1170**个索引，叶子节点有索引有data元素，假设占1K，那一个节点就放16K/1K=**16个元素**，假设树高是**3**，所有节点都放满，能放多少数据？可以算一下，1170 * 1170 * 16=21902400，**2千多万**，mysql设置16K的大小，数据就可以存2千多万就已经足够了吧，既能保证一次磁盘IO不要Load太多的数据 又能保证一次load的性能，即便表的数据在几千万的数量也能保证树的高度在一个可控的范围。
2. 叶子节点之间还有指针，方便范围查找。
